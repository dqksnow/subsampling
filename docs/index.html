<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Optimal Subsampling Methods for Statistical Models • subsampling</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Optimal Subsampling Methods for Statistical Models">
<meta name="description" content="Balancing computational and statistical efficiency, subsampling techniques offer a practical solution for handling large-scale data analysis. Subsampling methods enhance statistical modeling for massive datasets by efficiently drawing representative subsamples from full dataset based on tailored sampling probabilities. These probabilities are optimized for specific goals, such as minimizing the variance of coefficient estimates or reducing prediction error. Based on specified modeling assumptions and subsampling techniques, the package provides functions to draw subsamples from the full data, fit the model on the subsamples, and perform statistical inference.">
<meta property="og:description" content="Balancing computational and statistical efficiency, subsampling techniques offer a practical solution for handling large-scale data analysis. Subsampling methods enhance statistical modeling for massive datasets by efficiently drawing representative subsamples from full dataset based on tailored sampling probabilities. These probabilities are optimized for specific goals, such as minimizing the variance of coefficient estimates or reducing prediction error. Based on specified modeling assumptions and subsampling techniques, the package provides functions to draw subsamples from the full data, fit the model on the subsamples, and perform statistical inference.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">subsampling</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/ssp-logit.html">`ssp.glm`: Subsampling for Generalized Linear Models</a></li>
    <li><a class="dropdown-item" href="articles/ssp-quantreg.html">`ssp.quantreg`: Subsampling for Quantile Regression</a></li>
    <li><a class="dropdown-item" href="articles/ssp-relogit.html">`ssp.relogit`: Subsampling for Logistic Regression Model with Rare Events</a></li>
    <li><a class="dropdown-item" href="articles/ssp-softmax.html">`ssp.softmax`: Subsampling for Softmax (Multinomial) Regression Model</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dqksnow/Subsampling/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="subsampling">subsampling<a class="anchor" aria-label="anchor" href="#subsampling"></a>
</h1></div>
<!-- badges: start -->

<p>A major challenge in big data statistical analysis is the demand for computing resources. For example, when fitting a logistic regression model to binary response variable with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>×</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">N \times d</annotation></semantics></math> dimensional covariates, the computational complexity of estimating the coefficients using the IRLS algorithm is <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>ζ</mi><mi>N</mi><msup><mi>d</mi><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">O(\zeta N d^2)</annotation></semantics></math>, where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ζ</mi><annotation encoding="application/x-tex">\zeta</annotation></semantics></math> is the number of iteriation. When <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> is large, the cost can be prohibitive, especially if high performance computing resources are unavailable. Subsampling has become a widely used technique to balance the trade-off between computational efficiency and statistical efficiency.</p>
<p>The R package <code>subsampling</code> provides optimal subsampling methods for various statistical models such as generalized linear models (GLM), softmax (multinomial) regression, rare event logistic regression and quantile regression model. Specialized subsampling techniques are provided to address specific challenges across different models and datasets. With specified model assumptions and subsampling techniques, it draws subsample from the full data, fits model on the subsample and perform statistical inferences.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the package by</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"subsampling"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or install the development version from GitHub</span></span>
<span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"dqksnow/subsampling"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>The <a href="https://dqksnow.github.io/subsampling/">Online document</a> provides a guidance for quick start.</p>
<ul>
<li>
<a href="https://dqksnow.github.io/subsampling/articles/ssp-logit.html">Generalized linear model</a>.</li>
<li>
<a href="https://dqksnow.github.io/subsampling/articles/ssp-relogit.html">Rare event logistic regression</a>.</li>
<li>
<a href="https://dqksnow.github.io/subsampling/articles/ssp-softmax.html">Softmax (multinomial) regression</a>.</li>
<li>
<a href="https://dqksnow.github.io/subsampling/articles/ssp-quantreg.html">Quantile regression</a>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is an example of subsampling method on logistic regression:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dqksnow/subsampling" class="external-link">subsampling</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">1e4</span></span>
<span><span class="va">beta0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="fl">7</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">beta0</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span></span>
<span><span class="va">corr</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span><span class="va">sigmax</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">corr</span>, <span class="va">d</span>, <span class="va">d</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">corr</span>, <span class="va">d</span><span class="op">)</span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu">MASS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MASS/man/mvrnorm.html" class="external-link">mvrnorm</a></span><span class="op">(</span><span class="va">N</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">d</span><span class="op">)</span>, <span class="va">sigmax</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"V"</span>, <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="va">P</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">beta0</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">X</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">beta0</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">1</span>, <span class="va">P</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">Y</span>, <span class="va">X</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">formula</span> <span class="op">&lt;-</span> <span class="va">Y</span> <span class="op">~</span> <span class="va">.</span></span>
<span><span class="va">n.plt</span> <span class="op">&lt;-</span> <span class="fl">200</span></span>
<span><span class="va">n.ssp</span> <span class="op">&lt;-</span> <span class="fl">600</span></span>
<span><span class="va">ssp.results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ssp.glm.html">ssp.glm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">formula</span>,</span>
<span>                       data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                       n.plt <span class="op">=</span> <span class="va">n.plt</span>,</span>
<span>                       n.ssp <span class="op">=</span> <span class="va">n.ssp</span>,</span>
<span>                       family <span class="op">=</span> <span class="st">"quasibinomial"</span>,</span>
<span>                       criterion <span class="op">=</span> <span class="st">"optL"</span>,</span>
<span>                       sampling.method <span class="op">=</span> <span class="st">"poisson"</span>,</span>
<span>                       likelihood <span class="op">=</span> <span class="st">"weighted"</span></span>
<span>                       <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ssp.results</span><span class="op">)</span></span>
<span><span class="co">#&gt; Model Summary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ssp.glm(formula = formula, data = data, n.plt = n.plt, n.ssp = n.ssp, </span></span>
<span><span class="co">#&gt;     family = "quasibinomial", criterion = "optL", sampling.method = "poisson", </span></span>
<span><span class="co">#&gt;     likelihood = "weighted")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Subsample Size:</span></span>
<span><span class="co">#&gt;                                </span></span>
<span><span class="co">#&gt; 1       Total Sample Size 10000</span></span>
<span><span class="co">#&gt; 2 Expected Subsample Size   600</span></span>
<span><span class="co">#&gt; 3   Actual Subsample Size   635</span></span>
<span><span class="co">#&gt; 4   Unique Subsample Size   635</span></span>
<span><span class="co">#&gt; 5  Expected Subample Rate    6%</span></span>
<span><span class="co">#&gt; 6    Actual Subample Rate 6.35%</span></span>
<span><span class="co">#&gt; 7    Unique Subample Rate 6.35%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           Estimate Std. Error z value Pr(&gt;|z|)</span></span>
<span><span class="co">#&gt; Intercept  -0.4149     0.0803 -5.1694  &lt;0.0001</span></span>
<span><span class="co">#&gt; V1         -0.5874     0.0958 -6.1286  &lt;0.0001</span></span>
<span><span class="co">#&gt; V2         -0.4723     0.1086 -4.3499  &lt;0.0001</span></span>
<span><span class="co">#&gt; V3         -0.5492     0.1014 -5.4164  &lt;0.0001</span></span>
<span><span class="co">#&gt; V4         -0.4044     0.1012 -3.9950  &lt;0.0001</span></span>
<span><span class="co">#&gt; V5         -0.3725     0.1045 -3.5649   0.0004</span></span>
<span><span class="co">#&gt; V6         -0.6703     0.0973 -6.8859  &lt;0.0001</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="acknowledgments">Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h2>
<p>The development of this package was supported by the National Eye Institute of the National Institutes of Health under Award Number R21EY035710.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=subsampling" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/dqksnow/Subsampling/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/dqksnow/Subsampling/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing subsampling</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Qingkai Dong <br><small class="roles"> Author, maintainer, copyright holder </small>  </li>
<li>Yaqiong Yao <br><small class="roles"> Author </small>  </li>
<li>Haiying Wang <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=subsampling" class="external-link"><img src="https://www.r-pkg.org/badges/version/subsampling" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=subsampling" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/subsampling" alt="Total_Downloads"></a></li>
<li><a href="https://CRAN.R-project.org/package=subsampling" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/subsampling" alt="Monthly_Downloads"></a></li>
<li><a href="https://github.com/dqksnow/subsampling/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/dqksnow/subsampling/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Qingkai Dong, Yaqiong Yao, Haiying Wang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
